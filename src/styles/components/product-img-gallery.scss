@use "../variables" as *;
@use "../mixins" as *;

// Product Image Gallery styles (refactored nesting for readability)
.product-image-gallery {
	position: relative;

	.gallery__viewport {
		position: relative;
		overflow: hidden; // arrows overlay
	}

	.gallery__track {
		display: flex;
		overflow-x: auto;
		scroll-snap-type: x mandatory;
		-webkit-overflow-scrolling: touch;
		scroll-behavior: smooth;
		&::-webkit-scrollbar { display: none; }
	}

	.gallery__slide {
		min-width: 100%;
		scroll-snap-align: start;
	}

	.gallery__image-wrapper {
		position: relative;
		@include responsive-border-radius;
		overflow: hidden;
	}

	.image-button {
		padding: 0;
		border: 0;
		background: none;
		cursor: zoom-in;
		display: block;
		width: 100%;
		img {
			width: 100%;
			height: auto;
			display: block;
		}
	}

	.badge {
		&.badge--sale {
			position: absolute;
			top: 12px;
			left: 12px;
			background: $highlighted-color; // previously #e11d48
			//font-weight: $font-weight-medium;
			//letter-spacing: 0.04em;
			padding: 6px 10px;
			border-radius: 4px;
			z-index: 2;
			span { color: $white; }
		}
	}

	.nav {
		position: absolute;
		top: 50%;
		transform: translateY(-50%);
		width: 38px;
		height: 38px;
		border-radius: 999px;
		border: none;
		background: rgba(0,0,0,0.45);
		color: $white;
		display: none;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		z-index: 3;
		&:disabled { opacity: 0.4; cursor: default; }
		&--prev { left: 8px; }
		&--next { right: 8px; }
		@include media-tablet-up { display: inline-flex; }
		img {
			width: 9px;
			height: auto;
		}
	}

	.gallery__thumbs {
		display: grid;
		grid-auto-flow: column;
		grid-auto-columns: max-content;
		overflow-x: auto;
		justify-content: start;
		align-items: start;
		gap: 9px;
		@include media-tablet-up { gap: 12px; }
	}

	.thumb {
		border: 2px solid transparent;
		border-radius: 9px;
		padding: 0;
		background: none;
		cursor: pointer;
		width: fit-content;
		height: fit-content;
		&.is-active { border-color: $black; }
		img {
			width: 54px;
			height: 54px;
			object-fit: cover;
			display: block;
			border-radius: 6px;
			@include media-tablet-up { 
				width: 72px;
				height: 72px;
			 }
		}
	}

	// Modal
	.gallery__modal {
		position: fixed;
		inset: 0;
		z-index: 5000;

		.modal__backdrop {
			position: absolute;
			inset: 0;
			background: rgba(0, 0, 0, 0.81);
			width: 100%;
			height: 100%;
			border: 0;
		}

		.modal__content {
			position: absolute;
			inset: 0;
			display: grid;
			grid-template-rows: auto 1fr auto;
			justify-content: center;
		}

		.modal__close {
			position: absolute;
			top: 18px;
			right: 18px;
			background: rgba(0,0,0,0.6);
			color: $white;
			border: 0;
			border-radius: 999px;
			width: 36px;
			height: 36px;
			cursor: pointer;
			z-index: 2;
		}

		.modal__image {
			display: grid;
			place-items: center;
			//padding: 20px;
			img {
				max-width: 90vw;
				max-height: 90vh;
				width: auto;
				height: auto;
				border-radius: 12px;
			}
		}

		.modal__thumbs {
			width: fit-content;
    		height: fit-content;
			display: grid;
			grid-auto-flow: column;
			width: 100%;
			justify-content: center;
			
			
			overflow-x: auto;

			.thumb { border-color: rgba(255,255,255,0.7); }
			.thumb.is-active { border-color: $white; }
			gap: 9px;
			@include media-tablet-up { gap: 12px; }

		}
	}
}
